<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#14152e">
  <title>梦境守护者 - AI智能助眠</title>
  <link rel="stylesheet" href="assets/css/mobile-app.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="assets/images/app-icon.svg">
  <link rel="icon" type="image/svg+xml" href="assets/images/app-icon.svg">
  <style>
    /* 完全重置样式以确保不倾斜 */
    *, *:before, *:after {
      box-sizing: border-box;
      transform: none !important;
      perspective: none !important;
      transform-style: flat !important;
      transition: none !important;
    }
    
    html, body {
      margin: 0;
      padding: 0;
      background-color: #333;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      width: 100vw;
      overflow: hidden;
      perspective: none !important;
      transform-style: flat !important;
    }
    
    .app-container {
      width: 414px;
      height: 896px;
      overflow: hidden;
      position: relative;
      background-color: #14152e;
      box-shadow: 0 0 30px rgba(0, 0, 0, 0.5);
      border-radius: 32px;
      margin: 0 auto;
    }
    
    @media (max-width: 500px) {
      .app-container {
        border-radius: 0;
        width: 100%;
        height: 100vh;
      }
    }
    
    .main-content {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 60px;
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
      padding: 0;
    }
    
    .tab-bar {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 60px;
      display: flex;
      justify-content: space-around;
      align-items: center;
      background-color: rgba(26, 27, 70, 0.95);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      z-index: 999;
    }
    
    .tab-content {
      padding: 15px;
      display: none;
    }
    
    .tab-content.active {
      display: block;
    }
    
    /* 修复音频播放器 - 完全重写避免变形 */
    .audio-player {
      display: flex;
      align-items: center;
      padding: 12px;
      background-color: rgba(26, 27, 70, 0.9);
      border-radius: 12px;
      margin-bottom: 10px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
      position: absolute;
      bottom: 75px;
      left: 7px;
      right: 7px;
      width: calc(100% - 14px);
      z-index: 990;
    }
    
    /* 修复播放器信息显示 */
    .player-title, .player-artist {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 150px;
    }
  </style>
</head>
<body>
  <div class="app-container">
    <!-- Main Content -->
    <div class="main-content">
      <!-- Home Tab Content -->
      <div id="home-tab" class="tab-content active">
        <!-- Hero Section -->
        <div class="hero-section">
          <h1 class="hero-title">改善睡眠质量</h1>
          <p class="hero-description">使用科学声音和AI技术，帮助你获得更好的睡眠体验</p>
          <button class="hero-cta" data-action="start-sleep">开始助眠</button>
        </div>

        <!-- Sound Categories -->
        <div class="card">
          <h2 class="card-title"><i class="fas fa-music"></i> 助眠声音</h2>
          <div class="sound-categories">
            <div class="category-item active" data-category="nature">
              <div class="category-icon"><i class="fas fa-leaf"></i></div>
              <div class="category-name">自然</div>
            </div>
            <div class="category-item" data-category="meditation">
              <div class="category-icon"><i class="fas fa-om"></i></div>
              <div class="category-name">冥想</div>
            </div>
            <div class="category-item" data-category="stories">
              <div class="category-icon"><i class="fas fa-book"></i></div>
              <div class="category-name">故事</div>
            </div>
            <div class="category-item" data-category="music">
              <div class="category-icon"><i class="fas fa-guitar"></i></div>
              <div class="category-name">音乐</div>
            </div>
            <div class="category-item" data-category="whitenoise">
              <div class="category-icon"><i class="fas fa-wind"></i></div>
              <div class="category-name">白噪音</div>
            </div>
          </div>

          <!-- Sound List -->
          <div class="sound-list scrollable" id="sound-list">
            <!-- 由JavaScript动态填充 -->
          </div>
        </div>

        <!-- Sleep Stats -->
        <div class="card">
          <h2 class="card-title"><i class="fas fa-chart-line"></i> 睡眠数据</h2>
          <div class="sleep-stats">
            <div class="stat-card">
              <div class="stat-value">6h 48m</div>
              <div class="stat-label">平均睡眠时长</div>
            </div>
            <div class="stat-card">
              <div class="stat-value">82%</div>
              <div class="stat-label">睡眠质量</div>
            </div>
            <div class="stat-card">
              <div class="stat-value">23:30</div>
              <div class="stat-label">平均入睡时间</div>
            </div>
            <div class="stat-card">
              <div class="stat-value">5</div>
              <div class="stat-label">连续使用天数</div>
            </div>
          </div>
        </div>

        <!-- Sleep Reminder -->
        <div class="card">
          <h2 class="card-title"><i class="fas fa-bell"></i> 睡眠提醒</h2>
          <div class="sleep-reminder">
            <div class="reminder-info">
              <div class="reminder-time">23:00</div>
              <div class="reminder-label">每日提醒入睡时间</div>
            </div>
            <label class="reminder-toggle">
              <input type="checkbox" class="toggle-input" checked>
              <span class="toggle-slider"></span>
            </label>
          </div>
        </div>
      </div>

      <!-- Sounds Tab Content -->
      <div id="sounds-tab" class="tab-content">
        <div class="card">
          <h2 class="card-title"><i class="fas fa-sliders-h"></i> 声音调节</h2>
          
          <!-- 增强版混音器 -->
          <div class="sound-mixer mt-2">
            <div class="mixer-channels">
              <!-- 动态填充音轨 -->
            </div>
            
            <!-- 增强的混音功能 -->
            <div class="enhanced-mixer-controls">
              <button class="ai-optimize-btn">
                <i class="fas fa-magic"></i> AI优化混音
              </button>
              <button class="add-sound-btn">
                <i class="fas fa-plus"></i> 添加声音
              </button>
              <button class="save-mix-btn">
                <i class="fas fa-save"></i> 保存混音
              </button>
              <button class="share-mix-btn">
                <i class="fas fa-share-alt"></i> 分享混音
              </button>
            </div>
            
            <!-- 语音控制提示 -->
            <div class="voice-control-tip">
              <i class="fas fa-microphone"></i>
              <p>说"添加鸟鸣声"或"添加篝火声"来通过语音添加更多声音</p>
            </div>
            
            <!-- AI推荐混音 -->
            <div class="ai-recommendations">
              <h3>AI推荐混音</h3>
              <div class="recommendation-list">
                <div class="recommendation-item" data-mix="focus">
                  <div class="rec-icon"><i class="fas fa-brain"></i></div>
                  <div class="rec-info">
                    <div class="rec-name">专注工作</div>
                    <div class="rec-sound">雨声 + 咖啡馆 + 轻音乐</div>
                  </div>
                </div>
                <div class="recommendation-item" data-mix="deep-sleep">
                  <div class="rec-icon"><i class="fas fa-moon"></i></div>
                  <div class="rec-info">
                    <div class="rec-name">深度睡眠</div>
                    <div class="rec-sound">白噪音 + 风扇声 + 心跳</div>
                  </div>
                </div>
                <div class="recommendation-item" data-mix="relax">
                  <div class="rec-icon"><i class="fas fa-spa"></i></div>
                  <div class="rec-info">
                    <div class="rec-name">放松减压</div>
                    <div class="rec-sound">海浪 + 鸟鸣 + 轻风</div>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- 情绪匹配功能 -->
            <div class="emotion-detection">
              <h3>情绪感知助眠</h3>
              <p>允许系统感知您的情绪，为您推荐最适合的助眠音效</p>
              <button class="emotion-scan-btn"><i class="fas fa-heart-pulse"></i> 检测情绪</button>
            </div>
          </div>
        </div>
        
        <!-- Featured Collections -->
        <div class="card">
          <h2 class="card-title"><i class="fas fa-star"></i> 精选合集</h2>
          <div class="sound-list">
            <div class="sound-item" data-sound="deep-sleep">
              <img src="assets/images/sounds/white-noise.svg" alt="深度睡眠" class="sound-item-image">
              <div class="sound-item-overlay">
                <div class="sound-item-title">深度睡眠</div>
                <div class="sound-item-artist">专业配乐</div>
              </div>
              <div class="sound-item-play">
                <i class="fas fa-play"></i>
              </div>
            </div>
            <div class="sound-item" data-sound="lucid-dreams">
              <img src="assets/images/sounds/forest.svg" alt="清醒梦" class="sound-item-image">
              <div class="sound-item-overlay">
                <div class="sound-item-title">清醒梦境</div>
                <div class="sound-item-artist">深度冥想</div>
              </div>
              <div class="sound-item-play">
                <i class="fas fa-play"></i>
              </div>
            </div>
            <div class="sound-item" data-sound="stress-relief">
              <img src="assets/images/sounds/ocean.svg" alt="减压" class="sound-item-image">
              <div class="sound-item-overlay">
                <div class="sound-item-title">压力释放</div>
                <div class="sound-item-artist">冥想引导</div>
              </div>
              <div class="sound-item-play">
                <i class="fas fa-play"></i>
              </div>
            </div>
            <div class="sound-item" data-sound="delta-waves">
              <img src="assets/images/sounds/rain.svg" alt="脑电波" class="sound-item-image">
              <div class="sound-item-overlay">
                <div class="sound-item-title">Delta脑波</div>
                <div class="sound-item-artist">科学助眠</div>
              </div>
              <div class="sound-item-play">
                <i class="fas fa-play"></i>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Audio Source Instructions -->
        <div class="card">
          <h2 class="card-title"><i class="fas fa-info-circle"></i> 音频资源</h2>
          <div class="info-content">
            <p>本应用使用以下开源音频资源：</p>
            <ul>
              <li><a href="https://freesound.org" target="_blank">Freesound.org</a> - 开源音效库</li>
              <li><a href="https://freemusicarchive.org" target="_blank">Free Music Archive</a> - 免费音乐资源</li>
            </ul>
            <p class="mt-2">您可以点击下方按钮访问音频下载页面:</p>
            <button class="hero-cta mt-1" id="show-audio-sources">查看音频来源</button>
          </div>
        </div>
      </div>

      <!-- AI Companion Tab Content -->
      <div id="ai-tab" class="tab-content">
        <div class="ai-companion">
          <div class="ai-companion-header">
            <img src="assets/images/ai-avatar.svg" alt="AI头像" class="ai-avatar">
            <div>
              <div class="ai-name">梦境顾问</div>
              <div class="ai-status">在线，随时为您服务</div>
            </div>
          </div>
          <div class="ai-chat" id="ai-chat-messages">
            <div class="message message-ai">
              <div class="message-content">
                晚上好！我是您的梦境顾问。今天想要如何改善您的睡眠？
              </div>
              <div class="message-time">刚刚</div>
            </div>
            <div class="message message-user">
              <div class="message-content">
                我最近很难入睡，有什么建议吗？
              </div>
              <div class="message-time">刚刚</div>
            </div>
            <div class="message message-ai">
              <div class="message-content">
                我理解您的困扰。尝试这些方法：1. 睡前一小时避免蓝光设备；2. 建立固定的睡前仪式；3. 尝试我们的"深度放松"音频冥想，它专为入睡困难设计。您想现在开始听吗？
              </div>
              <div class="message-time">刚刚</div>
            </div>
          </div>
          <div class="ai-input">
            <input type="text" placeholder="输入问题或选择常见问题..." id="ai-input-field">
            <button id="ai-voice-btn"><i class="fas fa-microphone"></i></button>
            <button id="ai-send-btn"><i class="fas fa-paper-plane"></i></button>
          </div>
        </div>
        
        <!-- AI Features -->
        <div class="card">
          <h2 class="card-title"><i class="fas fa-robot"></i> AI助眠功能</h2>
          <div class="ai-features">
            <div class="ai-feature-item">
              <i class="fas fa-moon"></i>
              <h3>睡眠分析</h3>
              <p>根据您的睡眠数据，提供个性化改善建议</p>
            </div>
            <div class="ai-feature-item">
              <i class="fas fa-brain"></i>
              <h3>认知行为治疗</h3>
              <p>基于临床验证的CBT-I技术，改善失眠问题</p>
            </div>
            <div class="ai-feature-item">
              <i class="fas fa-headphones"></i>
              <h3>个性化音频</h3>
              <p>根据您的喜好和需求，生成定制的助眠内容</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Timer Tab Content -->
      <div id="timer-tab" class="tab-content">
        <div class="card">
          <h2 class="card-title"><i class="fas fa-clock"></i> 睡眠定时器</h2>
          <div class="sleep-timer">
            <div class="timer-display">30:00</div>
            <div class="timer-controls">
              <button class="timer-btn">15分钟</button>
              <button class="timer-btn primary">30分钟</button>
              <button class="timer-btn">60分钟</button>
              <button class="timer-btn">自定义</button>
            </div>
          </div>
        </div>
        
        <!-- Fade Out Options -->
        <div class="card">
          <h2 class="card-title"><i class="fas fa-volume-down"></i> 淡出设置</h2>
          <div class="fade-options">
            <div class="option-item">
              <div class="option-label">逐渐淡出</div>
              <label class="reminder-toggle">
                <input type="checkbox" class="toggle-input" checked>
                <span class="toggle-slider"></span>
              </label>
            </div>
            <div class="option-item">
              <div class="option-label">淡出时长</div>
              <select class="option-select">
                <option>30秒</option>
                <option selected>1分钟</option>
                <option>2分钟</option>
                <option>5分钟</option>
              </select>
            </div>
          </div>
        </div>
        
        <!-- Sleep Schedule -->
        <div class="card">
          <h2 class="card-title"><i class="fas fa-calendar-alt"></i> 睡眠计划</h2>
          <div class="sleep-schedule">
            <div class="schedule-item">
              <div class="schedule-day">周一至周五</div>
              <div class="schedule-time">
                <div class="time-label">入睡时间</div>
                <div class="time-value">23:00</div>
              </div>
              <div class="schedule-time">
                <div class="time-label">起床时间</div>
                <div class="time-value">07:00</div>
              </div>
            </div>
            <div class="schedule-item">
              <div class="schedule-day">周末</div>
              <div class="schedule-time">
                <div class="time-label">入睡时间</div>
                <div class="time-value">23:30</div>
              </div>
              <div class="schedule-time">
                <div class="time-label">起床时间</div>
                <div class="time-value">08:00</div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Profile Tab Content -->
      <div id="profile-tab" class="tab-content">
        <div class="profile-header">
          <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="用户头像" class="profile-avatar">
          <h2 class="profile-name">梦想家</h2>
          <div class="profile-info">加入时间：2023年10月</div>
          <div class="profile-stats">
            <div class="profile-stat">
              <div class="profile-stat-value">28</div>
              <div class="profile-stat-label">助眠次数</div>
            </div>
            <div class="profile-stat">
              <div class="profile-stat-value">12</div>
              <div class="profile-stat-label">收藏音频</div>
            </div>
            <div class="profile-stat">
              <div class="profile-stat-value">5</div>
              <div class="profile-stat-label">分享次数</div>
            </div>
          </div>
        </div>
        
        <!-- Membership Card -->
        <div class="membership-card">
          <div class="membership-label">会员状态</div>
          <div class="membership-type">免费试用期</div>
          <div class="membership-expires">剩余天数：7天</div>
          <div class="membership-features">
            <div class="membership-feature">
              <i class="fas fa-check-circle"></i> 无限制声音播放
            </div>
            <div class="membership-feature">
              <i class="fas fa-check-circle"></i> 基础AI助眠建议
            </div>
            <div class="membership-feature">
              <i class="fas fa-check-circle"></i> 5个保存的混音
            </div>
          </div>
          <a href="#" class="membership-btn">升级至专业版</a>
        </div>
        
        <!-- Settings -->
        <div class="profile-settings">
          <div class="settings-item">
            <div class="settings-left">
              <i class="fas fa-user"></i>
              <div class="settings-label">个人资料</div>
            </div>
            <div class="settings-right">
              <i class="fas fa-chevron-right"></i>
            </div>
          </div>
          <div class="settings-item">
            <div class="settings-left">
              <i class="fas fa-bell"></i>
              <div class="settings-label">通知设置</div>
            </div>
            <div class="settings-right">
              <i class="fas fa-chevron-right"></i>
            </div>
          </div>
          <div class="settings-item">
            <div class="settings-left">
              <i class="fas fa-download"></i>
              <div class="settings-label">已下载音频</div>
            </div>
            <div class="settings-right">
              8个
            </div>
          </div>
          <div class="settings-item" data-action="share">
            <div class="settings-left">
              <i class="fas fa-share-alt"></i>
              <div class="settings-label">分享应用</div>
            </div>
            <div class="settings-right">
              <i class="fas fa-chevron-right"></i>
            </div>
          </div>
          <div class="settings-item">
            <div class="settings-left">
              <i class="fas fa-question-circle"></i>
              <div class="settings-label">帮助与支持</div>
            </div>
            <div class="settings-right">
              <i class="fas fa-chevron-right"></i>
            </div>
          </div>
        </div>
      </div>

      <!-- Setting Tab Content -->
      <div id="settings-tab" class="tab-content">
        <!-- 用户资料 -->
        <div class="user-profile card">
          <img src="assets/images/user-avatar.svg" class="user-avatar" alt="用户头像">
          <h2 class="profile-name">梦想家</h2>
          <p class="profile-info">加入时间：2023年10月</p>
          
          <div class="user-stats">
            <div class="stat-item">
              <div class="stat-value">28</div>
              <div class="stat-label">助眠次数</div>
            </div>
            <div class="stat-item">
              <div class="stat-value">12</div>
              <div class="stat-label">收藏音频</div>
            </div>
            <div class="stat-item">
              <div class="stat-value">5</div>
              <div class="stat-label">分享次数</div>
            </div>
          </div>
          
          <div class="membership-info">
            <h3>会员状态</h3>
            <p>免费试用期</p>
            <div class="days-left">剩余天数：7天</div>
            
            <div class="membership-features">
              <div class="feature-item"><i class="fas fa-check"></i> 无限制声音播放</div>
              <div class="feature-item"><i class="fas fa-check"></i> 基础AI助眠建议</div>
              <div class="feature-item"><i class="fas fa-check"></i> 5个保存的混音</div>
            </div>
            
            <button class="membership-btn">升级至专业版</button>
          </div>
        </div>
        
        <!-- 设置项目 -->
        <div class="settings-list card">
          <div class="settings-item" data-action="profile">
            <div class="settings-icon"><i class="fas fa-user"></i></div>
            <div class="settings-name">个人资料</div>
            <div class="settings-arrow"><i class="fas fa-chevron-right"></i></div>
          </div>
          <div class="settings-item" data-action="notifications">
            <div class="settings-icon"><i class="fas fa-bell"></i></div>
            <div class="settings-name">通知设置</div>
            <div class="settings-arrow"><i class="fas fa-chevron-right"></i></div>
          </div>
          <div class="settings-item" data-action="downloads">
            <div class="settings-icon"><i class="fas fa-download"></i></div>
            <div class="settings-name">已下载音频</div>
            <div class="settings-value">8个</div>
            <div class="settings-arrow"><i class="fas fa-chevron-right"></i></div>
          </div>
          <div class="settings-item" data-action="share">
            <div class="settings-icon"><i class="fas fa-share-alt"></i></div>
            <div class="settings-name">分享应用</div>
            <div class="settings-arrow"><i class="fas fa-chevron-right"></i></div>
          </div>
          <div class="settings-item" data-action="help">
            <div class="settings-icon"><i class="fas fa-question-circle"></i></div>
            <div class="settings-name">帮助与支持</div>
            <div class="settings-arrow"><i class="fas fa-chevron-right"></i></div>
          </div>
        </div>
      </div>

      <!-- 新增: 世界地图签到标签内容 -->
      <div id="map-tab" class="tab-content">
        <div class="card">
          <h2 class="card-title"><i class="fas fa-globe-asia"></i> 全球声音之旅</h2>
          <p class="section-description">探索世界各地的自然声音，每晚在不同地点入眠</p>
          
          <!-- 互动地图区域 -->
          <div class="world-map-container">
            <div id="interactive-map">
              <!-- 地图将通过JavaScript加载 -->
              <img src="assets/images/world-map.svg" alt="世界地图" class="placeholder-map">
            </div>
          </div>
          
          <!-- 热门声音地点 -->
          <div class="popular-locations">
            <h3>热门声音地点</h3>
            <div class="location-list">
              <div class="location-item" data-location="rainforest">
                <div class="location-icon"><i class="fas fa-tree"></i></div>
                <div class="location-info">
                  <div class="location-name">亚马逊雨林</div>
                  <div class="location-type">热带雨林声音</div>
                </div>
              </div>
              <div class="location-item" data-location="ocean">
                <div class="location-icon"><i class="fas fa-water"></i></div>
                <div class="location-info">
                  <div class="location-name">巴厘岛海滩</div>
                  <div class="location-type">海浪声</div>
                </div>
              </div>
              <div class="location-item" data-location="mountain">
                <div class="location-icon"><i class="fas fa-mountain"></i></div>
                <div class="location-info">
                  <div class="location-name">瑞士阿尔卑斯山</div>
                  <div class="location-type">高山风声</div>
                </div>
              </div>
              <div class="location-item" data-location="nordic">
                <div class="location-icon"><i class="fas fa-snowflake"></i></div>
                <div class="location-info">
                  <div class="location-name">北欧森林</div>
                  <div class="location-type">宁静冬季声音</div>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- 睡眠打卡 -->
        <div class="card">
          <h2 class="card-title"><i class="fas fa-map-marker-alt"></i> 我的睡眠打卡</h2>
          
          <div class="sleep-checkins">
            <div class="checkin-item">
              <img src="assets/images/checkins/rainforest-checkin.jpg" alt="雨林睡眠打卡" class="checkin-image">
              <div class="checkin-info">
                <div class="checkin-location">亚马逊雨林</div>
                <div class="checkin-date">2025/02/15</div>
                <div class="checkin-quality">睡眠质量: 94%</div>
              </div>
              <button class="share-checkin-btn"><i class="fas fa-share-alt"></i></button>
            </div>
            
            <div class="checkin-item">
              <img src="assets/images/checkins/ocean-checkin.jpg" alt="海滩睡眠打卡" class="checkin-image">
              <div class="checkin-info">
                <div class="checkin-location">巴厘岛海滩</div>
                <div class="checkin-date">2025/02/14</div>
                <div class="checkin-quality">睡眠质量: 87%</div>
              </div>
              <button class="share-checkin-btn"><i class="fas fa-share-alt"></i></button>
            </div>
          </div>
          
          <!-- 生成新打卡 -->
          <div class="create-checkin">
            <h3>生成今日打卡</h3>
            <p>AI将根据您昨晚的睡眠环境生成精美的打卡图片</p>
            <button class="create-checkin-btn"><i class="fas fa-magic"></i> 生成打卡</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Audio Player -->
    <div class="audio-player" id="audio-player">
      <div class="player-toggle"></div>
      <img src="assets/images/sounds/rain.svg" alt="音频图片" class="player-image">
      <div class="player-info">
        <div class="player-title">轻柔雨声</div>
        <div class="player-artist">环境音效</div>
        <div class="player-progress">
          <div class="player-progress-current"></div>
        </div>
      </div>
      <div class="player-controls">
        <button class="player-btn"><i class="fas fa-step-backward"></i></button>
        <button class="player-btn player-play"><i class="fas fa-pause"></i></button>
        <button class="player-btn"><i class="fas fa-step-forward"></i></button>
      </div>
    </div>

    <!-- 模态弹窗 -->
    <div id="share-modal" class="share-modal">
      <div class="share-content">
        <div class="share-header">
          <h2>分享应用</h2>
          <button class="share-close">&times;</button>
        </div>
        
        <div class="share-body">
          <p>分享梦境守护者给您的朋友，一起体验更好的睡眠</p>
          
          <div class="share-link">
            <input type="text" value="https://dreamguardian.app" readonly>
            <button id="copy-link-btn"><i class="fas fa-copy"></i></button>
          </div>
          
          <div class="share-social">
            <button class="social-btn wechat"><i class="fab fa-weixin"></i></button>
            <button class="social-btn weibo"><i class="fab fa-weibo"></i></button>
            <button class="social-btn qq"><i class="fab fa-qq"></i></button>
            <button class="social-btn more"><i class="fas fa-ellipsis-h"></i></button>
          </div>
        </div>
      </div>
    </div>
    
    <!-- 音频来源弹窗 -->
    <div id="audio-sources-modal" class="share-modal">
      <div class="share-content">
        <div class="share-header">
          <h2>音频来源</h2>
          <button class="share-close">&times;</button>
        </div>
        
        <div class="share-body">
          <p>本应用使用以下开源音频资源</p>
          
          <div class="audio-sources-list">
            <!-- 将由JavaScript动态填充 -->
          </div>
          
          <a href="https://freesound.org" target="_blank" class="hero-cta mt-3">
            访问Freesound
          </a>
        </div>
      </div>
    </div>

    <!-- 声音选择器弹窗 -->
    <div id="sound-selector-modal" class="sound-selector-modal">
      <div class="sound-selector-header">
        <h2>添加声音</h2>
        <button class="sound-selector-close">&times;</button>
      </div>
      
      <div class="sound-selector-categories">
        <button class="sound-selector-category active" data-category="nature">自然</button>
        <button class="sound-selector-category" data-category="whitenoise">白噪音</button>
        <button class="sound-selector-category" data-category="meditation">冥想</button>
        <button class="sound-selector-category" data-category="music">音乐</button>
        <button class="sound-selector-category" data-category="stories">故事</button>
      </div>
      
      <div class="selectable-sounds">
        <!-- 将由JavaScript动态填充 -->
      </div>
    </div>
    
    <!-- 情绪检测弹窗 -->
    <div id="emotion-detection-modal" class="share-modal">
      <div class="share-content">
        <div class="share-header">
          <h2>情绪检测</h2>
          <button class="share-close">&times;</button>
        </div>
        
        <div class="share-body">
          <div class="emotion-detection-content">
            <div class="emotion-detection-status">
              <i class="fas fa-microphone-alt pulse"></i>
              <p>请对着麦克风说几句话，系统将分析您的情绪状态...</p>
            </div>
            
            <div class="emotion-result" style="display: none;">
              <div class="detected-emotion">
                <div class="emotion-icon"><i class="fas fa-tired"></i></div>
                <div class="emotion-name">疲惫</div>
              </div>
              
              <div class="emotion-description">
                <p>检测到您当前的情绪状态为<strong>疲惫</strong>。我们推荐以下声音组合来帮助您放松并入睡：</p>
              </div>
              
              <div class="emotion-recommendation">
                <div class="rec-title">推荐组合</div>
                <div class="rec-sounds">轻雨声 + 低频白噪音</div>
                <button class="apply-rec-btn">应用推荐</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Bottom Tab Bar -->
    <div class="tab-bar">
      <div class="tab-item active" data-tab="home-tab">
        <i class="fas fa-home"></i>
        <span>首页</span>
      </div>
      <div class="tab-item" data-tab="sounds-tab">
        <i class="fas fa-music"></i>
        <span>声音</span>
      </div>
      <div class="tab-item" data-tab="map-tab">
        <i class="fas fa-globe"></i>
        <span>地图</span>
      </div>
      <div class="tab-item" data-tab="ai-tab">
        <i class="fas fa-robot"></i>
        <span>AI助手</span>
      </div>
      <div class="tab-item" data-tab="settings-tab">
        <i class="fas fa-user"></i>
        <span>我的</span>
      </div>
    </div>
  </div>

  <script src="assets/js/sound-data.js"></script>
  <script src="assets/js/checkin-data.js"></script>
  <script src="assets/js/mobile-app.js"></script>
</body>
</html> 